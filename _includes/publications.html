{%- comment -%}
Renders the publications section from the `_papers` collection.
Expected front matter fields per paper:
- title (string)
- authors (string)
- year (number)
- venue (string, optional)
- paper_url (string, optional)
- code_url (string, optional)
- award (string, optional)
- type (string: "preprint" or "selected")
{%- endcomment -%}

{%- if site.papers -%}
{%- assign preprints = site.papers | where: 'type', 'preprint' | sort: 'year' | reverse -%}
{%- assign selected = site.papers | where: 'type', 'selected' | sort: 'year' | reverse -%}

{%- if preprints and preprints.size > 0 -%}
  <h6 class="docs-header">Recent Preprints</h6>
  <ul>
  {%- for p in preprints -%}
    <li>
      <i>{{ p.title }}</i><br>
      {{ p.authors }}.<br>
      {%- if p.venue -%}<b>{{ p.venue }}&nbsp;</b> {%- endif -%}{{ p.year }}&nbsp;
      {%- if p.paper_url -%} <a href="{{ p.paper_url }}" target="_blank">[{{ p.paper_label | default: 'paper' }}]</a>&nbsp;{%- endif -%}
      {%- if p.code_url -%} <a href="{{ p.code_url }}" target="_blank">[Code]</a>&nbsp;{%- endif -%}
      {%- if p.award -%} <strong>{{ p.award }}</strong>{%- endif -%}
    </li>
  {%- endfor -%}
  </ul>
{%- endif -%}

{%- if selected and selected.size > 0 -%}
  <h6 class="docs-header">Selected Publications</h6>
  <ul>
  {%- for p in selected -%}
    <li>
      <i>{{ p.title }}</i><br>
      {{ p.authors }}.<br>
      {%- if p.venue -%}<b>{{ p.venue }}&nbsp;</b> {%- endif -%}{{ p.year }}&nbsp;
      {%- if p.paper_url -%} <a href="{{ p.paper_url }}" target="_blank">[{{ p.paper_label | default: 'paper' }}]</a>&nbsp;{%- endif -%}
      {%- if p.code_url -%} <a href="{{ p.code_url }}" target="_blank">[Code]</a>&nbsp;{%- endif -%}
      {%- if p.award -%} <strong>{{ p.award }}</strong>{%- endif -%}
    </li>
  {%- endfor -%}
  </ul>
{%- endif -%}
{%- endif -%}
